# Nested Message Data

If you're using [linked message](/v0/usage/interpolation#linked-message), you may want to pass a data to the linked message. For example, you have a message like this:

::code-group
```json [en.json]
{
    "greet": "Welcome to GM-I18n, {name}! [[greet2]]",
    "greet2": "Hope this library useful for you, {who}!"
}
```

```json [id.json]
{
    "greet": "Selamat datang di GM-I18n, {name}! [[greet2]]",
    "greet2": "Harap library ini bermanfaat untukmu, {who}!"
}
```
::

And then you get the static message or create a message reference like this:

```js [Create Event]
// assume the system is initialized on global variable

// static message
my_msg = i18n_get_messages("greet", {
    name: "John",
    who: "John"
}, "en");

// dynamic message
global.ref_msg = i18n_create_ref_message("global.ref_msg", "greet", {
    name: "John",
    who: "John"
});
```

The `my_msg` and `global.ref_msg` variable will return the same message:

> Welcome to GM-I18n, John! Hope this library useful for you, {who}!

The `{who}` is **not** replaced, even though we've **passed** the data. Why is that? It's because the data is **not passed** to the **linked message**. The data is only passed to the main message (`greet`), but not to the linked message (`greet2`).

::alert{type="warning"}
The GM-I18n system set this rule because:

1. It's **confusing**. Should we pass the `data` to the main message, or to the linked message? What if we want to pass different data to the linked message?
2. It's **dangerous**. What if the linked message is used in another message, but with different `data`? It will cause a **data collision**. For example, in the example above, what if we're using the same placeholder (`{name}`) in the `greet2` instead of `{who}`, but with different data?
3. It's **unnecessary**. You can just pass the `data` to the linked message directly, without passing it to the main message first.
4. It's **not always needed**. The linked message can be used without any `data`, and it will still work as expected.
5. It's **not consistent**. The linked message should be treated as a separate message, not as a part of the main message.
::

::alert{type="info"}
You'll only get this issue when you're using the **named data**. The **indexed data** (`{0}`, `{1}`, `{2}`, etc.) is not affected by this issue, because the indexed data **doesn't** support linked message. <br> <br>

You can still pass the data to the linked message, but you need to do it manually.
::

---

## Data in Linked Messages

As I mentioned before, the linked messages should be treated as a separate message. 

To pass the `data` to the linked message, you need to use a `child` or `child_*` key in the main message data.

::code-group
```js [Create Event]
// assume the system is initialized on global variable

// static message
my_msg = i18n_get_messages("greet", {
    name: "John",                       // interpolate {name} in "greet" message
                       
    child: {                            // act as the "data" for the linked message
        who: "John"                     // interpolate {who} in "greet2" message
    }
}, "en");

// dynamic message
global.ref_msg = i18n_create_ref_message("global.ref_msg", "greet3", {
    user: "Reader of GM-I18n",          // interpolate {user} in "greet3" message

    child: {                            // works the same as the static message
        user: "John"                    // using the same key (`user`) is fine, because it's in different "scope"
    }
});
```

```json [en.json]
{
    "greet": "Welcome to GM-I18n, {name}! [[greet2]]",
    "greet2": "Hope this library useful for you, {who}!",
    "greet3": "Hello, {user}! This is a parent message. [[greet4]]",
    "greet4": "And this is a child message, {user}!"
}
```

```json [id.json]
{
    "greet": "Selamat datang di GM-I18n, {name}! [[greet2]]",
    "greet2": "Harap library ini bermanfaat untukmu, {who}!",
    "greet3": "Halo, {user}! Ini adalah pesan induk. [[greet4]]",
    "greet4": "Dan ini adalah pesan anak, {user}!"
}
```
::

That's the basic of passing data to the linked message. Are you ready for the next section?

::alert{type="info"}
The `child` and ``child_*`` key are **reserved keywords**. You can't use it for other purpose. <br> <br>

You can nest the `child` key as deep as you want, but it's not recommended to have a very deep nesting, because it can be hard to manage the data.
::

---

## Default Child Data

The `child` key is used to pass the data to **all** of the linked message in the main message.  

